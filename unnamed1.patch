Index: app/src/main/res/layout/main.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/main.xml b/app/src/main/res/layout/main.xml
--- a/app/src/main/res/layout/main.xml
+++ b/app/src/main/res/layout/main.xml	(date 1766582124876)
@@ -198,7 +198,10 @@
             android:layout_above="@+id/bottom_panel"
             android:layout_below="@+id/top_panel"
             android:orientation="horizontal" >
-            
+            <FrameLayout
+                    android:id="@+id/map_fragment_container"
+                    android:layout_width="match_parent"
+                    android:layout_height="match_parent"/>
         </LinearLayout>
     </RelativeLayout>
 
Index: app/src/main/res/layout/map_screen.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/map_screen.xml b/app/src/main/res/layout/map_screen.xml
--- a/app/src/main/res/layout/map_screen.xml
+++ b/app/src/main/res/layout/map_screen.xml	(date 1766582124877)
@@ -1,23 +1,23 @@
-<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
+<?xml version="1.0" encoding="utf-8"?>
+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:id="@+id/map_screen_layout"
     android:layout_width="match_parent"
+    tools:context=".MapScreenActivity"
     android:layout_height="match_parent">
-
-    <!-- Map container for programmatically added fragment -->
-    <FrameLayout
-        android:id="@+id/map_container"
+        <FrameLayout
+        android:id="@+id/map_fragment_container"
         android:layout_width="match_parent"
-        android:layout_height="match_parent" />
-    <ImageButton
-            android:id="@+id/btnCompassToggle"
-            android:layout_width="48dp"
-            android:layout_height="48dp"
-            android:layout_margin="12dp"
-            android:background="?attr/selectableItemBackgroundBorderless"
-            android:src="@android:drawable/ic_menu_compass"
-            android:contentDescription="Toggle compass"
-
-            android:layout_alignParentTop="true"
-            android:layout_alignParentEnd="true"
-            android:focusable="true"
-            android:clickable="true"/>
-</RelativeLayout>
+        android:layout_height="match_parent"/>
+        <ImageButton
+        android:id="@+id/btnCompassToggle"
+        android:focusableInTouchMode="true"
+        android:clickable="true"
+        android:layout_width="48dp"
+        android:layout_height="48dp"
+        android:layout_margin="12dp"
+        android:background="?attr/selectableItemBackgroundBorderless"
+        android:src="@android:drawable/ic_menu_compass"
+        android:contentDescription="Toggle compass"
+        android:layout_gravity="top|end" />
+</FrameLayout>
Index: app/src/main/res/layout/data_bar_bottom.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/data_bar_bottom.xml b/app/src/main/res/layout/data_bar_bottom.xml
--- a/app/src/main/res/layout/data_bar_bottom.xml
+++ b/app/src/main/res/layout/data_bar_bottom.xml	(date 1766582124876)
@@ -1,4 +1,5 @@
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    android:id="@+id/bottom_bar"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:gravity="center"
@@ -7,120 +8,119 @@
     android:layout_marginLeft="10dip"
     android:layout_marginRight="10dip"
     android:layout_gravity="center">
-
     <!-- Local Map -->
-    <LinearLayout
-        android:id="@+id/btn_localmap_box"
-        android:layout_width="0dip"
-        android:layout_height="wrap_content"
-        android:layout_weight="0.2"
-        android:gravity="center"
-        android:padding="10dip">
+        <LinearLayout
+            android:id="@+id/btn_localmap_box"
+            android:layout_width="0dip"
+            android:layout_height="wrap_content"
+            android:layout_weight="0.2"
+            android:gravity="center"
+            android:padding="10dip">
 
-        <TextView
-            android:id="@+id/btn_localmap"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:shadowColor="#000000"
-            android:shadowDx="0"
-            android:shadowDy="0"
-            android:shadowRadius="10"
-            android:text="Local Map"
-            android:textColor="#aaffaa"
-            android:textSize="18dip" />
+            <TextView
+                android:id="@+id/btn_localmap"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:shadowColor="#000000"
+                android:shadowDx="0"
+                android:shadowDy="0"
+                android:shadowRadius="10"
+                android:text="Local Map"
+                android:textColor="#aaffaa"
+                android:textSize="18dip" />
 
-    </LinearLayout>
+        </LinearLayout>
 
-    <!-- World Map -->
-    <LinearLayout
-        android:id="@+id/btn_worldmap_box"
-        android:layout_width="0dip"
-        android:layout_height="wrap_content"
-        android:layout_weight="0.2"
-        android:gravity="center"
-        android:padding="10dip">
+        <!-- World Map -->
+        <LinearLayout
+            android:id="@+id/btn_worldmap_box"
+            android:layout_width="0dip"
+            android:layout_height="wrap_content"
+            android:layout_weight="0.2"
+            android:gravity="center"
+            android:padding="10dip">
 
-        <TextView
-            android:id="@+id/btn_worldmap"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:shadowColor="#000000"
-            android:shadowDx="0"
-            android:shadowDy="0"
-            android:shadowRadius="10"
-            android:text="World Map"
-            android:textColor="#aaffaa"
-            android:textSize="18dip" />
+            <TextView
+                android:id="@+id/btn_worldmap"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:shadowColor="#000000"
+                android:shadowDx="0"
+                android:shadowDy="0"
+                android:shadowRadius="10"
+                android:text="World Map"
+                android:textColor="#aaffaa"
+                android:textSize="18dip" />
 
-    </LinearLayout>
+        </LinearLayout>
 
-    <!-- Quests -->
-    <LinearLayout
-        android:id="@+id/btn_quests_box"
-        android:layout_width="0dip"
-        android:layout_height="wrap_content"
-        android:layout_weight="0.2"
-        android:gravity="center"
-        android:padding="10dip">
+        <!-- Quests -->
+        <LinearLayout
+            android:id="@+id/btn_quests_box"
+            android:layout_width="0dip"
+            android:layout_height="wrap_content"
+            android:layout_weight="0.2"
+            android:gravity="center"
+            android:padding="10dip">
 
-        <TextView
-            android:id="@+id/btn_quests"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:shadowColor="#000000"
-            android:shadowDx="0"
-            android:shadowDy="0"
-            android:shadowRadius="10"
-            android:text="Quests"
-            android:textColor="#aaffaa"
-            android:textSize="18dip" />
+            <TextView
+                android:id="@+id/btn_quests"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:shadowColor="#000000"
+                android:shadowDx="0"
+                android:shadowDy="0"
+                android:shadowRadius="10"
+                android:text="Quests"
+                android:textColor="#aaffaa"
+                android:textSize="18dip" />
 
-    </LinearLayout>
+        </LinearLayout>
 
-    <!-- Notes -->
-    <LinearLayout
-        android:id="@+id/btn_notes_box"
-        android:layout_width="0dip"
-        android:layout_height="wrap_content"
-        android:layout_weight="0.2"
-        android:gravity="center"
-        android:padding="10dip">
+        <!-- Notes -->
+        <LinearLayout
+            android:id="@+id/btn_notes_box"
+            android:layout_width="0dip"
+            android:layout_height="wrap_content"
+            android:layout_weight="0.2"
+            android:gravity="center"
+            android:padding="10dip">
 
-        <TextView
-            android:id="@+id/btn_notes"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:shadowColor="#000000"
-            android:shadowDx="0"
-            android:shadowDy="0"
-            android:shadowRadius="10"
-            android:text="Notes"
-            android:textColor="#aaffaa"
-            android:textSize="18dip" />
+            <TextView
+                android:id="@+id/btn_notes"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:shadowColor="#000000"
+                android:shadowDx="0"
+                android:shadowDy="0"
+                android:shadowRadius="10"
+                android:text="Notes"
+                android:textColor="#aaffaa"
+                android:textSize="18dip" />
 
-    </LinearLayout>
+        </LinearLayout>
 
-    <!-- Radio -->
-    <LinearLayout
-        android:id="@+id/btn_radio_box"
-        android:layout_width="0dip"
-        android:layout_height="wrap_content"
-        android:layout_weight="0.2"
-        android:gravity="center"
-        android:padding="10dip">
+        <!-- Radio -->
+        <LinearLayout
+            android:id="@+id/btn_radio_box"
+            android:layout_width="0dip"
+            android:layout_height="wrap_content"
+            android:layout_weight="0.2"
+            android:gravity="center"
+            android:padding="10dip">
 
-        <TextView
-            android:id="@+id/btn_radio"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:shadowColor="#000000"
-            android:shadowDx="0"
-            android:shadowDy="0"
-            android:shadowRadius="10"
-            android:text="Radio"
-            android:textColor="#aaffaa"
-            android:textSize="18dip" />
+            <TextView
+                android:id="@+id/btn_radio"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:shadowColor="#000000"
+                android:shadowDx="0"
+                android:shadowDy="0"
+                android:shadowRadius="10"
+                android:text="Radio"
+                android:textColor="#aaffaa"
+                android:textSize="18dip" />
 
-    </LinearLayout>
+        </LinearLayout>
 
 </LinearLayout>
Index: app/src/main/res/values/styles.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/styles.xml b/app/src/main/res/values/styles.xml
--- a/app/src/main/res/values/styles.xml
+++ b/app/src/main/res/values/styles.xml	(date 1766582124877)
@@ -1,34 +1,21 @@
 <resources>
-
-    <!--
-        Base application theme, dependent on API level. This theme is replaced
-        by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
-    -->
-    <style name="AppBaseTheme" parent="android:Theme.Light">
-        <!--
-            Theme customizations available in newer API levels can go in
-            res/values-vXX/styles.xml, while customizations related to
-            backward-compatibility can go here.
-        -->
-    </style>
-
-    <!-- Application theme. -->
-    <style name="AppTheme" parent="AppBaseTheme">
-        <!-- All customizations that are NOT specific to a particular API-level can go here. -->
+    <!-- Base app theme -->
+    <style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
+        <!-- Customize colors, fonts, etc. -->
     </style>
 
-        <style name="SplashTheme" parent="Theme.AppCompat.Light.NoActionBar">
-        <!-- Fullscreen -->
+    <!-- Fullscreen theme -->
+    <style name="AppTheme.Fullscreen" parent="AppTheme">
         <item name="windowNoTitle">true</item>
         <item name="windowActionBar">false</item>
-        <!-- Optional: background for splash -->
+        <item name="android:windowFullscreen">true</item>
         <item name="android:windowBackground">@color/black</item>
+        <!-- Optional: status bar transparent for API 21+ -->
+        <item name="android:statusBarColor">@android:color/transparent</item>
     </style>
 
-    <style name="FullscreenTheme" parent="Theme.AppCompat.Light.NoActionBar">
-        <item name="windowNoTitle">true</item>
-        <item name="windowActionBar">false</item>
-        <!-- Optional: set a background color -->
+    <!-- Splash screen -->
+    <style name="SplashTheme" parent="AppTheme.Fullscreen">
         <item name="android:windowBackground">@color/black</item>
     </style>
-</resources>
+</resources>
\ No newline at end of file
Index: app/src/main/res/values/themes.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/themes.xml b/app/src/main/res/values/themes.xml
--- a/app/src/main/res/values/themes.xml
+++ b/app/src/main/res/values/themes.xml	(date 1766582124878)
@@ -1,6 +1,6 @@
 <resources xmlns:tools="http://schemas.android.com/tools">
     <!-- Base application theme. -->
-    <style name="Theme.PipDroid3000mkII" parent="Theme.MaterialComponents.DayNight.NoActionBar">
+    <style name="Theme.PipDroid3000mkII" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
         <!-- Primary brand color. -->
         <item name="colorPrimary">@color/purple_500</item>
         <item name="colorPrimaryVariant">@color/purple_700</item>
Index: app/src/main/java/com/skettidev/pipdroid/utils/PermissionManager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/skettidev/pipdroid/utils/PermissionManager.java b/app/src/main/java/com/skettidev/pipdroid/utils/PermissionManager.java
new file mode 100644
--- /dev/null	(date 1766582124876)
+++ b/app/src/main/java/com/skettidev/pipdroid/utils/PermissionManager.java	(date 1766582124876)
@@ -0,0 +1,27 @@
+package com.skettidev.pipdroid.utils; // Change package name to match your app's structure
+
+public class PermissionManager {
+    private static PermissionManager instance;
+    private boolean arePermissionsGranted;
+
+    // Private constructor to prevent instantiation
+    private PermissionManager() {}
+
+    // Method to get the singleton instance of the class
+    public static PermissionManager getInstance() {
+        if (instance == null) {
+            instance = new PermissionManager();
+        }
+        return instance;
+    }
+
+    // Method to set permissions granted state
+    public void setPermissionsGranted(boolean granted) {
+        this.arePermissionsGranted = granted;
+    }
+
+    // Method to get the permissions granted state
+    public boolean arePermissionsGranted() {
+        return arePermissionsGranted;
+    }
+}
\ No newline at end of file
Index: app/src/main/java/com/skettidev/pipdroid/Splash.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/skettidev/pipdroid/Splash.java b/app/src/main/java/com/skettidev/pipdroid/Splash.java
--- a/app/src/main/java/com/skettidev/pipdroid/Splash.java
+++ b/app/src/main/java/com/skettidev/pipdroid/Splash.java	(date 1766582124875)
@@ -1,4 +1,5 @@
 package com.skettidev.pipdroid;
+import com.skettidev.pipdroid.utils.PermissionManager;
 
 import android.Manifest;
 import android.animation.ObjectAnimator;
@@ -15,9 +16,8 @@
 import androidx.appcompat.app.AppCompatActivity;
 import androidx.core.app.ActivityCompat;
 import androidx.core.content.ContextCompat;
-import androidx.core.view.WindowCompat;
-import androidx.core.view.WindowInsetsCompat;
-import androidx.core.view.WindowInsetsControllerCompat;
+import java.util.List;
+import java.util.ArrayList;
 
 public class Splash extends AppCompatActivity implements View.OnClickListener {
 
@@ -30,25 +30,6 @@
 	@Override
 	public void onCreate(Bundle savedInstanceState) {
 		super.onCreate(savedInstanceState);
-		// Allow content behind system bars
-//		WindowCompat.setDecorFitsSystemWindows(getWindow(), false);
-
-		// Hide system bars
-		WindowCompat.setDecorFitsSystemWindows(getWindow(), false);
-
-		// Hide system bars
-		WindowInsetsControllerCompat controller =
-				new WindowInsetsControllerCompat(getWindow(), getWindow().getDecorView());
-
-		controller.hide(
-				WindowInsetsCompat.Type.statusBars()
-//						| WindowInsetsCompat.Type.navigationBars()
-		);
-
-		// Allow swipe to show bars temporarily
-		controller.setSystemBarsBehavior(
-				WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE
-		);
 		setContentView(R.layout.splash);
 
 		// Initialize media player
@@ -99,6 +80,7 @@
 		swing.setDuration(400);
 		swing.start();
 	}
+
 	private void onPermissionsGranted() {
 		// Start MainMenu or other setup
 		Intent i = new Intent(Splash.this, MainMenu.class);
@@ -137,15 +119,22 @@
 				Manifest.permission.ACCESS_FINE_LOCATION
 		};
 
+		// Request permissions that are not granted
+		List<String> permissionsToRequest = new ArrayList<>();
 		for (String perm : permissions) {
 			if (ContextCompat.checkSelfPermission(this, perm) != PackageManager.PERMISSION_GRANTED) {
-				ActivityCompat.requestPermissions(this, permissions, 1);
-				return; // request once; user will be prompted
+				permissionsToRequest.add(perm);
 			}
 		}
 
-		// All permissions granted â†’ proceed
-		onPermissionsGranted();
-	}
-}
-
+		// If there's any permission left to request, request them
+		if (!permissionsToRequest.isEmpty()) {
+			ActivityCompat.requestPermissions(this,
+					permissionsToRequest.toArray(new String[0]), 1);
+		} else {
+			// If all permissions are already granted
+			onPermissionsGranted();
+			PermissionManager.getInstance().setPermissionsGranted(true);
+		}
+	}
+}
\ No newline at end of file
Index: app/src/main/java/com/skettidev/pipdroid/MainMenu.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/skettidev/pipdroid/MainMenu.java b/app/src/main/java/com/skettidev/pipdroid/MainMenu.java
--- a/app/src/main/java/com/skettidev/pipdroid/MainMenu.java
+++ b/app/src/main/java/com/skettidev/pipdroid/MainMenu.java	(date 1766582124875)
@@ -1,4 +1,5 @@
 package com.skettidev.pipdroid;
+
 import android.os.Handler;
 import android.os.Looper;
 import android.Manifest;
@@ -22,16 +23,16 @@
 import android.view.*;
 import android.view.ViewGroup.LayoutParams;
 import android.view.WindowManager;
-import androidx.core.view.WindowInsetsControllerCompat;
-
-import androidx.core.view.WindowInsetsCompat;
-
 import android.view.LayoutInflater;
 import android.widget.*;
 import androidx.activity.result.ActivityResultLauncher;
 import androidx.activity.result.contract.ActivityResultContracts;
 import androidx.appcompat.app.AppCompatActivity;
 import androidx.core.content.ContextCompat;
+import androidx.fragment.app.Fragment;
+import androidx.fragment.app.FragmentActivity;
+import androidx.fragment.app.FragmentTransaction;
+import androidx.constraintlayout.widget.ConstraintLayout;
 import com.google.android.gms.maps.CameraUpdateFactory;
 import com.google.android.gms.maps.GoogleMap;
 import com.google.android.gms.maps.OnMapReadyCallback;
@@ -44,84 +45,50 @@
 import com.google.android.gms.maps.model.LatLng;
 import com.google.android.gms.maps.model.MapStyleOptions;
 import com.google.android.gms.maps.model.MarkerOptions;
-import androidx.core.view.WindowCompat;
-import android.hardware.SensorEventListener;
 
 import java.io.IOException;
 
 
-public class MainMenu extends AppCompatActivity implements OnMapReadyCallback, SurfaceHolder.Callback, View.OnClickListener, View.OnLongClickListener {
+public class MainMenu extends AppCompatActivity implements OnMapReadyCallback, View.OnClickListener, View.OnLongClickListener {
 
 
-	//private vars
+	//public vars
 	public static GoogleMap mMap;
+
+	//private vars
 	private boolean isCompassModeEnabled = false;
 	private MapViewType currentMapView;
-	private ImageButton compassToggle;
+
 	private SupportMapFragment mapFragment;
-	private SensorEventListener sensorEventListener;
 	private SensorManager sensorManager;
 	private Sensor rotationSensor;
 
+	private enum MapViewType { WORLD, LOCAL }
+
 	private float[] rotationMatrix = new float[9];
 	private float[] orientation = new float[3];
 
 	private float zoomLevel = VarVault.WORLD_MAP_ZOOM; // default to WORLD MAP
 
-	private enum MapViewType { WORLD, LOCAL }
-
 	private final ActivityResultLauncher<String> requestPermissionLauncher =
 			registerForActivityResult(new ActivityResultContracts.RequestPermission(), isGranted -> {
 				if (isGranted) {
-					enableLocation();  // Enable location if permission is granted
+					enableLocation(zoomLevel);  // Enable location if permission is granted
 				} else {
 					Toast.makeText(MainMenu.this, "Permission denied", Toast.LENGTH_SHORT).show();
 				}
 			});
-//	FusedLocationProviderClient fusedLocationClient= LocationServices.getFusedLocationProviderClient(this);
 
 	// ########################
 	// ## On app start ########
 	// ########################
-//	@Override
+
 	@Override
 	public void onCreate(Bundle savedInstanceState) {
 		super.onCreate(savedInstanceState);
-//		// Allow content behind system bars
-//		WindowCompat.setDecorFitsSystemWindows(getWindow(), false);
-
-		// Hide system bars
-		WindowCompat.setDecorFitsSystemWindows(getWindow(), false);
-
-		// Hide system bars
-		WindowInsetsControllerCompat controller =
-				new WindowInsetsControllerCompat(getWindow(), getWindow().getDecorView());
-
-		controller.hide(
-				WindowInsetsCompat.Type.statusBars()
-//						| WindowInsetsCompat.Type.navigationBars()
-		);
-
-		// Allow swipe to show bars temporarily
-		controller.setSystemBarsBehavior(
-				WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE
-		);
-		setContentView(R.layout.main);
-
 		sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
 		rotationSensor = sensorManager.getDefaultSensor(Sensor.TYPE_ROTATION_VECTOR);
 
-		sensorEventListener = new SensorEventListener() {
-			@Override
-			public void onSensorChanged(SensorEvent event) {
-				// handle sensor data
-			}
-
-			@Override
-			public void onAccuracyChanged(Sensor sensor, int accuracy) {
-			}
-		};
-
 		if (rotationSensor != null) {
 			sensorManager.registerListener(
 					sensorEventListener,
@@ -131,7 +98,10 @@
 		} else {
 			Log.e("Sensors", "Rotation vector sensor not available on this device");
 		}
+		setContentView(R.layout.main);
 
+		// Initialize all buttons once in onCreate()
+		initializeMenuButtons();
 
 		// ===== Initialize sound =====
 		HandleSound.initSound(this.getApplicationContext());
@@ -164,7 +134,7 @@
 		z.setTextColor(Color.argb(100, 255, 225, 0));
 		VarVault.data.setOnClickListener(this);
 
-		// ===== Initialize stats and arrays =====
+		// ===== Initialize main menu functions =====
 		initSkills();
 		initSpecial();
 		InitializeArrays.all();
@@ -173,12 +143,12 @@
 
 		// ===== Optional: initialize map immediately =====
 		// If you want the map ready at startup, you can call:
-		// dataClicked();
+//		 dataClicked();
 	}
 
 	@Override
 	public void onClick(View source) {
-
+		Log.e("onClick()", "start");
 		VarVault.curCaps.setValue(VarVault.curCaps.getValue() + 5);
 
 		// Play a tune, dependent on source.
@@ -191,71 +161,82 @@
 
 		// Set the panels for future usage.
 		ViewGroup midPanel = findViewById(R.id.mid_panel);
-		ViewGroup topBar = findViewById(R.id.top_bar);
+
 		ViewGroup bottomBar = findViewById(R.id.bottom_bar);
 
+		ViewGroup topBar = findViewById(R.id.top_bar);  // Or whichever view you're targeting
+
 		// Sort the source
-		if (source == VarVault.stats)
+		Log.e("onClick()", "sort source");
+
+		if (source == VarVault.stats) {
 			statsClicked();
-		else if (source == VarVault.statusLL)
+			Log.e("onClick()", "statsClicked()");
+		}
+		else if (source == VarVault.statusLL) {
 			statusClicked();
-		else if (source == VarVault.specialLL || source == VarVault.special)
+			Log.e("onClick()", "statusClicked()");
+		}
+		else if (source == VarVault.specialLL || source == VarVault.special) {
 			specialClicked();
-		else if (source == VarVault.skillsLL || source == VarVault.skills)
+			Log.e("onClick()", "specialClicked()");
+		}
+		else if (source == VarVault.skillsLL || source == VarVault.skills) {
 			skillsClicked();
-		else if (source == VarVault.perksLL) {
-		} else if (source == VarVault.generalLL) {
-		} else if (source == VarVault.cnd || source == VarVault.rad || source == VarVault.stimpak) {
-		} else if (VarVault.SUBMENU_SPECIAL.contains(source))
+			Log.e("onClick()", "skillsClicked()");
+		}
+		else if (VarVault.SUBMENU_SPECIAL.contains(source)) {
 			specialStatClicked(source);
-		else if (VarVault.SUBMENU_SKILLS.contains(source))
+			Log.e("onClick()", "specialStatClicked()");
+		}
+		else if (VarVault.SUBMENU_SKILLS.contains(source)) {
 			skillStatClicked(source);
-		else if (source == VarVault.flashlight)
+			Log.e("onClick()", "skillStatClicked()");
+		}
+		else if (source == VarVault.flashlight) {
 			flashlightClicked();
-		else if (source == VarVault.items)
+			Log.e("onClick()", "flashlightClicked()");
+		}
+		else if (source == VarVault.items) {
 			itemsClicked();
-		else if (source == VarVault.weaponsLL)
+			Log.e("onClick()", "itemsClicked()");
+		}
+		else if (source == VarVault.weaponsLL) {
 			weaponsClicked();
-		else if (VarVault.Weapons.contains(source)) {
-		} else if (source == VarVault.apparelLL)
+			Log.e("onClick()", "weaponsClicked()");
+		}
+		else if (source == VarVault.apparelLL) {
 			apparelClicked();
-		else if (VarVault.Apparel.contains(source)) {
-		} else if (source == VarVault.aidLL) {
-			updateCAPS();
-		} else if (source == VarVault.miscLL) {
-			updateCAPS();
-		} else if (source == VarVault.ammoLL) {
+			Log.e("onClick()", "apparelClicked()");
+		}
+		else if (
+				source == VarVault.aidLL ||
+						source == VarVault.miscLL ||
+						source == VarVault.ammoLL
+		) {
 			updateCAPS();
-		} else if (source == VarVault.data)
-			dataClicked();
+			Log.e("onClick()", "updateCAPS()");
+		}
+		else if (source == VarVault.data) {
+			dataClicked(source);
+			Log.e("onClick()", "dataClicked(source)");
+		}
 
-			// ===== DATA BUTTONS HANDLING =====
-		else if (source == VarVault.localMapLL)
-			showLocalMap();
-		else if (source == VarVault.worldMapLL)
-			showWorldMap();
-		else if (source == VarVault.questsLL)
-			Log.d("Menu", "Quests clicked");
-		else if (source == VarVault.notesLL)
-			Log.d("Menu", "Notes clicked");
-		else if (source == VarVault.radioLL)
-			Log.d("Menu", "Radio clicked");
+		Log.e("onClick()", "sort source DONE!");
 
-		else {
-			topBar.removeAllViews();
-			midPanel.removeAllViews();
-			bottomBar.removeAllViews();
-		}
 	}
 
 
 	private void flashlightClicked() {
+		Log.e("flashlightClicked()", "flashlightClicked START!");
 		if (VarVault.mCamera == null) {
+			Log.e("flashlightClicked()", "flashlightClicked VarVault.mCamerais NULL!");
 			VarVault.preview = (SurfaceView) findViewById(R.id.PREVIEW);
 			VarVault.mHolder = VarVault.preview.getHolder();
 			VarVault.mCamera = Camera.open();
 			try {
 				VarVault.mCamera.setPreviewDisplay(VarVault.mHolder);
+				Log.e("flashlightClicked()", "Try set preview display!");
 			} catch (IOException e) {
 				// TODO Auto-generated catch block
 				e.printStackTrace();
@@ -265,6 +246,7 @@
 
 		// If it's off, turn it on
 		if (VarVault.isCamOn == false) {
+			Log.e("flashlightClicked()", "If it's off, turn it on");
 			Parameters params = VarVault.mCamera.getParameters();
 			params.setFlashMode(Parameters.FLASH_MODE_TORCH);
 			VarVault.mCamera.setParameters(params);
@@ -274,6 +256,7 @@
 
 		// If it's on, turn it off
 		else {
+			Log.e("flashlightClicked()", "If it's on, turn it off");
 			Parameters params = VarVault.mCamera.getParameters();
 			params.setFlashMode(Parameters.FLASH_MODE_OFF);
 			VarVault.mCamera.setParameters(params);
@@ -285,126 +268,232 @@
 	}
 
 	private void statsClicked() {
+		Log.e("statsClicked()", "statsClicked START");
 		// Clear crap
+
 		ViewGroup midPanel = (ViewGroup) findViewById(R.id.mid_panel);
 		ViewGroup topBar = (ViewGroup) findViewById(R.id.top_bar);
 		ViewGroup bottomBar = (ViewGroup) findViewById(R.id.bottom_bar);
+
+		// Check if midPanel is null
+		if (midPanel != null) {
+			Log.e("StatsClicked", "midPanel is null! Cannot remove views.");
+		} else {
+			midPanel.removeAllViews();  // Proceed with removing all views safely
+		}
+
+		// Check if topBar is null
+		if (topBar != null) {
+			topBar.removeAllViews();  // Proceed with removing all views safely
+		} else {
+			Log.e("StatsClicked", "top_bar is null! Cannot remove views.");
+		}
+
+		// Check if bottomBar is null
+		if (bottomBar != null) {
+			bottomBar.removeAllViews();  // Proceed with removing all views safely
+		} else {
+			Log.e("StatsClicked", "bottom_bar is null! Cannot remove views.");
+		}
+
 		LayoutInflater inf = this.getLayoutInflater();
 
-		midPanel.removeAllViews();
-		topBar.removeAllViews();
-		bottomBar.removeAllViews();
-
-		// Main screen turn on
-		inf.inflate(R.layout.status_screen, midPanel);
-		inf.inflate(R.layout.stats_bar_top, topBar);
-		inf.inflate(R.layout.stats_bar_bottom, bottomBar);
+		// Inflate new layouts
+		if (midPanel != null) {
+			inf.inflate(R.layout.status_screen, midPanel);
+		} else {
+			Log.e("StatsClicked", "midPanel is still null after check! Cannot inflate status_screen.");
+		}
+
+		if (topBar != null) {
+			inf.inflate(R.layout.stats_bar_top, topBar);
+		} else {
+			Log.e("StatsClicked", "topBar is still null after check! Cannot inflate stats_bar_top.");
+		}
+
+		if (bottomBar != null) {
+			inf.inflate(R.layout.stats_bar_bottom, bottomBar);
+		} else {
+			Log.e("StatsClicked", "bottomBar is still null after check! Cannot inflate stats_bar_bottom.");
+		}
 
 		// Format top bar text
 		VarVault.title = (TextView) findViewById(R.id.title_stats);
-		VarVault.title.setText("STATUS");
-		VarVault.title.setTypeface(VarVault.font);
+		if (VarVault.title != null) {
+			VarVault.title.setText("STATUS");
+			VarVault.title.setTypeface(VarVault.font);
+		} else {
+			Log.e("StatsClicked", "title_stats is null! Cannot set title text.");
+		}
 
 		VarVault.hp = (TextView) findViewById(R.id.hp_stats);
-		VarVault.hp.setTypeface(VarVault.font);
+		if (VarVault.hp != null) {
+			VarVault.hp.setTypeface(VarVault.font);
+		}
 
 		VarVault.ap = (TextView) findViewById(R.id.ap_stats);
-		VarVault.ap.setTypeface(VarVault.font);
+		if (VarVault.ap != null) {
+			VarVault.ap.setTypeface(VarVault.font);
+		}
 
 		VarVault.bat = (TextView) findViewById(R.id.bat_stats);
-		VarVault.bat.setTypeface(VarVault.font);
-		this.registerReceiver(VarVault.mBatInfoReceiver, new IntentFilter(
-				Intent.ACTION_BATTERY_CHANGED));
+		if (VarVault.bat != null) {
+			VarVault.bat.setTypeface(VarVault.font);
+			this.registerReceiver(VarVault.mBatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
+		}
 
-		// Button-ize the buttons
+// Button-ize the buttons
 		VarVault.status = (TextView) findViewById(R.id.btn_status);
 		VarVault.statusLL = (LinearLayout) findViewById(R.id.btn_status_box);
-		VarVault.status.setTypeface(VarVault.font);
-		VarVault.statusLL.setOnClickListener(this);
+		if (VarVault.status != null && VarVault.statusLL != null) {
+			VarVault.status.setTypeface(VarVault.font);
+			VarVault.statusLL.setOnClickListener(this);
+		} else {
+			Log.e("statsClicked", "status or statusLL is null! Cannot set OnClickListener.");
+		}
 
 		VarVault.special = (TextView) findViewById(R.id.btn_special);
 		VarVault.specialLL = (LinearLayout) findViewById(R.id.btn_special_box);
-		VarVault.special.setTypeface(VarVault.font);
-		VarVault.specialLL.setOnClickListener(this);
+		if (VarVault.special != null && VarVault.specialLL != null) {
+			VarVault.special.setTypeface(VarVault.font);
+			VarVault.specialLL.setOnClickListener(this);
+		} else {
+			Log.e("statsClicked", "special or specialLL is null! Cannot set OnClickListener.");
+		}
 
 		VarVault.skills = (TextView) findViewById(R.id.btn_skills);
 		VarVault.skillsLL = (LinearLayout) findViewById(R.id.btn_skills_box);
-		VarVault.skills.setTypeface(VarVault.font);
-		VarVault.skillsLL.setOnClickListener(this);
+		if (VarVault.skills != null && VarVault.skillsLL != null) {
+			VarVault.skills.setTypeface(VarVault.font);
+			VarVault.skillsLL.setOnClickListener(this);
+		} else {
+			Log.e("statsClicked", "skills or skillsLL is null! Cannot set OnClickListener.");
+		}
 
 		VarVault.perks = (TextView) findViewById(R.id.btn_perks);
 		VarVault.perksLL = (LinearLayout) findViewById(R.id.btn_perks_box);
-		VarVault.perks.setTypeface(VarVault.font);
-		VarVault.perksLL.setOnClickListener(this);
+		if (VarVault.perks != null && VarVault.perksLL != null) {
+			VarVault.perks.setTypeface(VarVault.font);
+			VarVault.perksLL.setOnClickListener(this);
+		} else {
+			Log.e("statsClicked", "perks or perksLL is null! Cannot set OnClickListener.");
+		}
 
 		VarVault.general = (TextView) findViewById(R.id.btn_general);
 		VarVault.generalLL = (LinearLayout) findViewById(R.id.btn_general_box);
-		VarVault.general.setTypeface(VarVault.font);
-		VarVault.generalLL.setOnClickListener(this);
+		if (VarVault.general != null && VarVault.generalLL != null) {
+			VarVault.general.setTypeface(VarVault.font);
+			VarVault.generalLL.setOnClickListener(this);
+		} else {
+			Log.e("statsClicked", "general or generalLL is null! Cannot set OnClickListener.");
+		}
+
 
 		statusClicked();
 
 	}
 
 	private void itemsClicked() {
-		// Clear crap
-		ViewGroup midPanel = (ViewGroup) findViewById(R.id.mid_panel);
+		// check to see if views are NULL, if not, clear them.
+
 		ViewGroup topBar = (ViewGroup) findViewById(R.id.top_bar);
+		if (topBar != null) {
+			topBar.removeAllViews();  // Proceed with removing all views safely
+		} else {
+			Log.e("itemsClicked", "top_bar is null! Cannot remove views.");
+		}
+
+		ViewGroup midPanel = (ViewGroup) findViewById(R.id.mid_panel);
+		if (midPanel != null) {
+			midPanel.removeAllViews();  // Proceed with removing all views safely
+		} else {
+			Log.e("itemsClicked", "mid_panel is null! Cannot remove views.");
+		}
+
 		ViewGroup bottomBar = (ViewGroup) findViewById(R.id.bottom_bar);
+		if (bottomBar != null) {
+			bottomBar.removeAllViews();  // Proceed with removing all views safely
+		} else {
+			Log.e("itemsClicked", "bottom_bar is null! Cannot remove views.");
+		}
+
+		// inflate layout
 		LayoutInflater inf = this.getLayoutInflater();
 
-		midPanel.removeAllViews();
-		topBar.removeAllViews();
-		bottomBar.removeAllViews();
 
 		// Main screen turn on
-		inf.inflate(R.layout.weapons_screen, midPanel);
-		inf.inflate(R.layout.items_bar_top, topBar);
-		inf.inflate(R.layout.items_bar_bottom, bottomBar);
+		if (midPanel != null) {
+			inf.inflate(R.layout.weapons_screen, midPanel);
+		}
+
+		if (topBar != null) {
+			inf.inflate(R.layout.items_bar_top, topBar);
+		}
+
+		if (bottomBar != null) {
+			inf.inflate(R.layout.items_bar_bottom, bottomBar);
+		}
 
 		VarVault.title = (TextView) findViewById(R.id.title_items);
+		if (VarVault.title != null) {
+			VarVault.title.setTypeface(VarVault.font);
+		}
 		VarVault.title.setTypeface(VarVault.font);
 
 		VarVault.wg = (TextView) findViewById(R.id.wg_items);
-		VarVault.maxWG.setValue(150 + (10 * VarVault.strength.getValue()));
-		updateWG();
-		VarVault.wg.setTypeface(VarVault.font);
+		if (VarVault.wg != null) {
+			VarVault.maxWG.setValue(150 + (10 * VarVault.strength.getValue()));
+			updateWG();
+			VarVault.wg.setTypeface(VarVault.font);
+		}
 
 		VarVault.caps = (TextView) findViewById(R.id.caps_items);
-		updateCAPS();
-		VarVault.caps.setTypeface(VarVault.font);
-		//VarVault.caps.setText(VarVault.curCaps.getValue());
+		if (VarVault.caps != null) {
+			updateCAPS();
+			VarVault.caps.setTypeface(VarVault.font);
+		}
 
 		VarVault.bat = (TextView) findViewById(R.id.bat_items);
-		VarVault.bat.setTypeface(VarVault.font);
-		this.registerReceiver(VarVault.mBatInfoReceiver, new IntentFilter(
-				Intent.ACTION_BATTERY_CHANGED));
+		if (VarVault.bat != null) {
+			VarVault.bat.setTypeface(VarVault.font);
+			this.registerReceiver(VarVault.mBatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
+		}
 
 		// Button-ize the buttons
 		VarVault.weapons = (TextView) findViewById(R.id.btn_weapons);
-		VarVault.weaponsLL = (LinearLayout) findViewById(R.id.btn_weapons_box);
-		VarVault.weapons.setTypeface(VarVault.font);
-		VarVault.weaponsLL.setOnClickListener(this);
+		if (VarVault.weapons != null) {
+			VarVault.weapons.setTypeface(VarVault.font);
+			VarVault.weaponsLL = (LinearLayout) findViewById(R.id.btn_weapons_box);
+			VarVault.weaponsLL.setOnClickListener(this);
+		}
 
 		VarVault.apparel = (TextView) findViewById(R.id.btn_apparel);
-		VarVault.apparelLL = (LinearLayout) findViewById(R.id.btn_apparel_box);
-		VarVault.apparel.setTypeface(VarVault.font);
-		VarVault.apparelLL.setOnClickListener(this);
+		if (VarVault.apparel != null) {
+			VarVault.apparel.setTypeface(VarVault.font);
+			VarVault.apparelLL = (LinearLayout) findViewById(R.id.btn_apparel_box);
+			VarVault.apparelLL.setOnClickListener(this);
+		}
 
 		VarVault.aid = (TextView) findViewById(R.id.btn_aid);
-		VarVault.aidLL = (LinearLayout) findViewById(R.id.btn_aid_box);
-		VarVault.aid.setTypeface(VarVault.font);
-		VarVault.aidLL.setOnClickListener(this);
+		if (VarVault.aid != null) {
+			VarVault.aid.setTypeface(VarVault.font);
+			VarVault.aidLL = (LinearLayout) findViewById(R.id.btn_aid_box);
+			VarVault.aidLL.setOnClickListener(this);
+		}
 
 		VarVault.misc = (TextView) findViewById(R.id.btn_misc);
-		VarVault.miscLL = (LinearLayout) findViewById(R.id.btn_misc_box);
-		VarVault.misc.setTypeface(VarVault.font);
-		VarVault.miscLL.setOnClickListener(this);
+		if (VarVault.misc != null) {
+			VarVault.misc.setTypeface(VarVault.font);
+			VarVault.miscLL = (LinearLayout) findViewById(R.id.btn_misc_box);
+			VarVault.miscLL.setOnClickListener(this);
+		}
 
 		VarVault.ammo = (TextView) findViewById(R.id.btn_ammo);
-		VarVault.ammoLL = (LinearLayout) findViewById(R.id.btn_ammo_box);
-		VarVault.ammo.setTypeface(VarVault.font);
-		VarVault.ammoLL.setOnClickListener(this);
+		if (VarVault.ammo != null) {
+			VarVault.ammo.setTypeface(VarVault.font);
+			VarVault.ammoLL = (LinearLayout) findViewById(R.id.btn_ammo_box);
+			VarVault.ammoLL.setOnClickListener(this);
+		}
 
 		populateOwnedWeapons();
 
@@ -436,77 +525,129 @@
 		updateCAPS();
 	}
 
-	private void dataClicked() {
-		//clear crap
-		ViewGroup midPanel = (ViewGroup) findViewById(R.id.mid_panel);
-		ViewGroup topBar = (ViewGroup) findViewById(R.id.top_bar);
-		ViewGroup bottomBar = (ViewGroup) findViewById(R.id.bottom_bar);
-		LayoutInflater inf = this.getLayoutInflater();
+	private void dataClicked(View source) {
+
+		View mapScreen = null;
 
-		midPanel.removeAllViews();
-		topBar.removeAllViews();
-		bottomBar.removeAllViews();
+		// check topBar
+		ViewGroup topBar = findViewById(R.id.top_bar);
+		if (topBar != null) {
+			topBar.removeAllViews();  // Proceed with removing all views safely
+		} else {
+			Log.e("dataClicked", "top_bar is null! Cannot remove views.");
+		}
+		//check mid_panel
+		ViewGroup midPanel = findViewById(R.id.mid_panel);
+		if (midPanel != null) {
+			midPanel.removeAllViews();  // Clear the midPanel to remove any current views
+			Log.e("dataClicked", "Cleared midPanel.");
+
+
+
+		}
+		//viewGroup midpanel additional setup?
+		if (midPanel != null) {
+			ViewGroup.LayoutParams params = midPanel.getLayoutParams();
+			params.width = ViewGroup.LayoutParams.MATCH_PARENT;
+			midPanel.setLayoutParams(params);
+		}
+
+		//check bottom bar
+		ViewGroup bottomBar = findViewById(R.id.bottom_panel);
+		// Dynamically inflate the bottom bar based on some condition
+		if (bottomBar != null) {
+			bottomBar.removeAllViews();
 
-		//main screen on
-		// Inflate top and bottom bars
-		inf.inflate(R.layout.data_bar_top, topBar, true);
-		inf.inflate(R.layout.data_bar_bottom, bottomBar, true);
-		// Inflate map_screen once
-		View mapScreenView = inf.inflate(R.layout.map_screen, midPanel, true);
-		FrameLayout mapContainer = mapScreenView.findViewById(R.id.map_container);
+			View bottomBarView = LayoutInflater.from(this)
+					.inflate(R.layout.data_bar_bottom, bottomBar, true);
+					initializeMenuButtons();
+//			View bottom_bar = bottomBarView.findViewById(R.id.bottom_bar);
+		} else {
+			Log.e("dataClicked", "bottom_panel is null! Cannot remove views.");
+		}
 
-//		ViewGroup midPanel = findViewById(R.id.mid_panel);
-//		ViewGroup topBar = findViewById(R.id.top_bar);
-//		ViewGroup bottomBar = findViewById(R.id.bottom_bar);
+		LayoutInflater inflater = getLayoutInflater();
+		mapScreen = inflater.inflate(R.layout.map_screen, midPanel, false); // Add map screen to midPanel
 
-		// Create the map fragment programmatically
-		SupportMapFragment mapFragment = SupportMapFragment.newInstance();
-		getSupportFragmentManager()
-				.beginTransaction()
-				.replace(mapContainer.getId(), mapFragment)
-				.commit();
+		if (mapScreen != null) {
+			midPanel.addView(mapScreen);
+			Log.e("dataClicked", "Inflated map screen to the midPanel.");
+			// ðŸ”‘ INITIALIZE COMPASS HERE
+			initCompassToggle(mapScreen);
+		} else {
+			Log.e("dataClicked()", "mapScreen inflation FAILED.");
+			return;
+		}
 
-		// Ensure fragment is attached before requesting the map
-		getSupportFragmentManager().executePendingTransactions();
-		mapFragment.getMapAsync(this);
-		initCompassToggle();
-
-		// Button-ize the bottom bar buttons
-		VarVault.localMap = bottomBar.findViewById(R.id.btn_localmap);
-		VarVault.localMapLL = bottomBar.findViewById(R.id.btn_localmap_box);
-		VarVault.localMap.setTypeface(VarVault.font);
-		VarVault.localMapLL.setOnClickListener(this);
-
-		VarVault.worldMap = bottomBar.findViewById(R.id.btn_worldmap);
-		VarVault.worldMapLL = bottomBar.findViewById(R.id.btn_worldmap_box);
-		VarVault.worldMap.setTypeface(VarVault.font);
-		VarVault.worldMapLL.setOnClickListener(this);
+		View mapFragmentContainer = findViewById(R.id.map_fragment_container);
+		if (mapFragmentContainer != null && mapFragmentContainer.getVisibility() == View.VISIBLE) {
+			Log.e("dataClicked", "mapContainer left=" + mapFragmentContainer.getLeft() + " right=" + mapFragmentContainer.getRight());
+			// Try to find an existing fragment by its tag
+			SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentByTag("MAP_FRAGMENT_TAG");
+			if (mapFragment == null) {
+				mapFragment = SupportMapFragment.newInstance();
+				FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
+				Log.e("dataClicked", "Map fragment is not found, create and add it.");
+				transaction.replace(R.id.map_fragment_container, mapFragment, "MAP_FRAGMENT_TAG");
+				transaction.commit();
+			} else {
+				Log.e("dataClicked", "Map fragment already exists.");
+			}
+			mapFragment.getMapAsync(this);
+		}
+		//now for the logic stuff
+//		inflate mapScreen
+		// data button menu handling
 
-		VarVault.quests = bottomBar.findViewById(R.id.btn_quests);
-		VarVault.questsLL = bottomBar.findViewById(R.id.btn_quests_box);
-		VarVault.quests.setTypeface(VarVault.font);
-		VarVault.questsLL.setOnClickListener(this);
 
-		VarVault.notes = bottomBar.findViewById(R.id.btn_notes);
-		VarVault.notesLL = bottomBar.findViewById(R.id.btn_notes_box);
-		VarVault.notes.setTypeface(VarVault.font);
-		VarVault.notesLL.setOnClickListener(this);
-
-		VarVault.radio = bottomBar.findViewById(R.id.btn_radio);
-		VarVault.radioLL = bottomBar.findViewById(R.id.btn_radio_box);
-		VarVault.radio.setTypeface(VarVault.font);
-		VarVault.radioLL.setOnClickListener(this);
-
+	}
+	// Sets the active map view and moves the camera
+//	private void setActiveMapView(MapViewType currentMapView) {
+////		currentMapView = mapViewType;
+//
+//		if (mMap != null && VarVault.playerLocation != null) {
+//			switch (currentMapView) {
+//				case LOCAL:
+//					setInitialCameraPosition(VarVault.LOCAL_MAP_ZOOM);
+//					break;
+//				case WORLD:
+//					setInitialCameraPosition(VarVault.WORLD_MAP_ZOOM);
+//					break;
+//			}
+//		}
+		// Update button UI (alpha) to reflect active map
+//		updateMapButtonsUI();
+//	}
+	// Updates the alpha of map buttons only
+	private void updateMapButtonsUI() {
+		VarVault.localMapLL.setAlpha(currentMapView == MapViewType.LOCAL ? 1f : 0.4f);
+		VarVault.worldMapLL.setAlpha(currentMapView == MapViewType.WORLD ? 1f : 0.4f);
+		// Other buttons
+//		VarVault.questsLL.oncli
+//			Log.d("Menu", "Quests clicked");
+//		} else if (source == VarVault.notesLL) {
+//			Log.d("Menu", "Notes clicked");
+//		} else if (source == VarVault.radioLL) {
+//			Log.d("Menu", "Radio clicked");
+//		}
 	}
-
 
 	private void statusClicked() {
+//		setContentView(R.layout.main);
+		ViewGroup midPanel = findViewById(R.id.mid_panel);
+		ViewGroup bottomBar = findViewById(R.id.bottom_bar);
+
 
-		ViewGroup midPanel = (ViewGroup) findViewById(R.id.mid_panel);
+		if (midPanel == null || bottomBar == null) {
+			Log.e("MainMenu", "One or more views are null!");
+			return; // Prevent further actions on null views
+		}
+
+		LayoutInflater inf = this.getLayoutInflater();
+
 		midPanel.removeAllViews();
 
-		LayoutInflater inf = this.getLayoutInflater();
-		inf.inflate(R.layout.status_screen, midPanel, true);
+		inf.inflate(R.layout.status_screen, midPanel);
 
 		VarVault.title.setText("STATUS");
 
@@ -709,7 +850,7 @@
 		}
 	}
 
-	private void skillStatClicked (View source){
+	private void skillStatClicked(View source) {
 
 		if (source == VarVault.bart || source == VarVault.barterSTAT)
 			VarVault.skillImage.setImageResource(R.drawable.barter);
@@ -739,7 +880,7 @@
 			VarVault.skillImage.setImageResource(R.drawable.unarmed);
 	}
 
-	private void specialStatClicked (View source){
+	private void specialStatClicked(View source) {
 		if (source == VarVault.str)
 			VarVault.specialImage.setImageResource(R.drawable.strength);
 		else if (source == VarVault.per)
@@ -820,7 +961,7 @@
 	}
 
 	@Override
-	protected void onActivityResult ( int requestCode, int resultCode, Intent data){
+	protected void onActivityResult(int requestCode, int resultCode, Intent data) {
 		super.onActivityResult(requestCode, resultCode, data);
 		if (requestCode == 0 && resultCode == RESULT_OK) {
 			SharedPreferences prefs = getSharedPreferences("SPECIAL", 0);
@@ -864,34 +1005,57 @@
 			VarVault.isCamOn = false;
 		}
 		super.onPause();
+		sensorManager.unregisterListener(sensorEventListener);
 	}
 
 	// onResume()
 	protected void onResume() {
 		super.onResume();
+		sensorManager.registerListener(sensorEventListener, rotationSensor, SensorManager.SENSOR_DELAY_UI);
 		this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
 		getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
+		// Check if the map fragment is already added
 
-		// Recheck permissions on activity resume
-		if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
-			enableLocation();  // Enable location if permission is granted
-		}
 
 		// Clear crap
+
+		ViewGroup topBar = (ViewGroup) findViewById(R.id.top_bar);
+		// Check if topBar is null
+		if (topBar != null) {
+			topBar.removeAllViews();  // Proceed with removing all views safely
+		} else {
+			Log.e("onResume", "top_bar is null! Cannot remove views.");
+		}
+
 		ViewGroup midPanel = (ViewGroup) findViewById(R.id.mid_panel);
-		ViewGroup topBar = (ViewGroup) findViewById(R.id.top_bar);
+		// Check if midPanel is null
+		if (midPanel != null) {
+			midPanel.removeAllViews();  // Proceed with removing all views safely
+		} else {
+			Log.e("onResume", "midPanel is null! Cannot remove views.");
+		}
+
 		ViewGroup bottomBar = (ViewGroup) findViewById(R.id.bottom_bar);
+		// Check if bottomBar is null
+		if (bottomBar != null) {
+			bottomBar.removeAllViews();  // Proceed with removing all views safely
+		} else {
+			Log.e("onResume", "bottom_bar is null! Cannot remove views.");
+		}
+
 		LayoutInflater inf = this.getLayoutInflater();
 
-		midPanel.removeAllViews();
-		topBar.removeAllViews();
-		bottomBar.removeAllViews();
-
 		// Main screen turn on
-		inf.inflate(R.layout.status_screen, midPanel);
-		inf.inflate(R.layout.stats_bar_top, topBar);
-		inf.inflate(R.layout.stats_bar_bottom, bottomBar);
 
+		if (topBar != null) {
+			inf.inflate(R.layout.stats_bar_top, topBar, true);
+		}
+		if (midPanel != null) {
+			inf.inflate(R.layout.status_screen, midPanel, true);
+		}
+		if (bottomBar != null) {
+			inf.inflate(R.layout.stats_bar_bottom, bottomBar, true);
+		}
 		// Format top bar text
 		VarVault.title = (TextView) findViewById(R.id.title_stats);
 		VarVault.title.setText("STATUS");
@@ -911,51 +1075,93 @@
 		// Button-ize the buttons
 		VarVault.status = (TextView) findViewById(R.id.btn_status);
 		VarVault.statusLL = (LinearLayout) findViewById(R.id.btn_status_box);
-		VarVault.status.setTypeface(VarVault.font);
-		VarVault.status.setOnClickListener(this);
-		VarVault.statusLL.setOnClickListener(this);
+
+		if (VarVault.status != null && VarVault.statusLL != null) {
+			VarVault.status.setTypeface(VarVault.font);
+			VarVault.status.setOnClickListener(this);
+			VarVault.statusLL.setOnClickListener(this);
+			VarVault.status.setTypeface(VarVault.font);
+		} else {
+			Log.e("onResume", "status or statusLL is null! Cannot set OnClickListener.");
+		}
 
 		VarVault.special = (TextView) findViewById(R.id.btn_special);
 		VarVault.specialLL = (LinearLayout) findViewById(R.id.btn_special_box);
-		VarVault.special.setTypeface(VarVault.font);
-		VarVault.special.setOnClickListener(this);
-		VarVault.specialLL.setOnClickListener(this);
+		if (VarVault.special != null && VarVault.specialLL != null) {
+			VarVault.special.setOnClickListener(this);
+			VarVault.specialLL.setOnClickListener(this);
+			VarVault.special.setTypeface(VarVault.font);
+		} else {
+			Log.e("onResume()", "special or specialLL is null! Cannot set OnClickListener.");
+		}
+
 
 		VarVault.skills = (TextView) findViewById(R.id.btn_skills);
 		VarVault.skillsLL = (LinearLayout) findViewById(R.id.btn_skills_box);
-		VarVault.skills.setTypeface(VarVault.font);
-		VarVault.skills.setOnClickListener(this);
-		VarVault.skillsLL.setOnClickListener(this);
+		if (VarVault.skills != null && VarVault.skillsLL != null) {
+			VarVault.skills.setOnClickListener(this);
+			VarVault.skillsLL.setOnClickListener(this);
+			VarVault.skills.setTypeface(VarVault.font);
+		} else {
+			Log.e("onResume()", "skills or skillsLL is null! Cannot set OnClickListener.");
+		}
 
 		VarVault.perks = (TextView) findViewById(R.id.btn_perks);
 		VarVault.perksLL = (LinearLayout) findViewById(R.id.btn_perks_box);
-		VarVault.perks.setTypeface(VarVault.font);
-		VarVault.perks.setOnClickListener(this);
-		VarVault.perksLL.setOnClickListener(this);
+
+		if (VarVault.perks != null && VarVault.perksLL != null) {
+			VarVault.perks.setOnClickListener(this);
+			VarVault.perksLL.setOnClickListener(this);
+			VarVault.perks.setTypeface(VarVault.font);
+		} else {
+			Log.e("onResume()", "perks or perksLL is null! Cannot set OnClickListener.");
+		}
+
 
 		VarVault.general = (TextView) findViewById(R.id.btn_general);
 		VarVault.generalLL = (LinearLayout) findViewById(R.id.btn_general_box);
-		VarVault.general.setTypeface(VarVault.font);
-		VarVault.general.setOnClickListener(this);
-		VarVault.generalLL.setOnClickListener(this);
+		if (VarVault.general != null && VarVault.generalLL != null) {
+			VarVault.general.setOnClickListener(this);
+			VarVault.generalLL.setOnClickListener(this);
+			VarVault.general.setTypeface(VarVault.font);
+		} else {
+			Log.e("onResume()", "general or generalLL is null! Cannot set OnClickListener.");
+		}
 
-		VarVault.cnd = (TextView) findViewById(R.id.btn_cnd);
-		VarVault.cnd.setTypeface(VarVault.font);
-		VarVault.cnd.setOnClickListener(this);
+		if (VarVault.cnd != null) {
+			VarVault.cnd.setOnClickListener(this);
+			VarVault.cnd = (TextView) findViewById(R.id.btn_cnd);
+			VarVault.cnd.setTypeface(VarVault.font);
+		} else {
+			Log.e("onResume()", "cnd or cndLL is null! Cannot set OnClickListener.");
+		}
 
-		VarVault.rad = (TextView) findViewById(R.id.btn_rad);
-		VarVault.rad.setTypeface(VarVault.font);
-		VarVault.rad.setOnClickListener(this);
+		if (VarVault.rad != null) {
+			VarVault.rad = (TextView) findViewById(R.id.btn_rad);
+			VarVault.rad.setTypeface(VarVault.font);
+			VarVault.rad.setOnClickListener(this);
+		} else {
+			Log.e("onResume()", "rad or radLL is null! Cannot set OnClickListener.");
+		}
+
 
 		VarVault.stimpak = (TextView) findViewById(R.id.btn_stimpak);
-		VarVault.stimpak.setTypeface(VarVault.font);
-		VarVault.stimpak.setOnClickListener(this);
+		if (VarVault.stimpak != null) {
+			VarVault.stimpak.setOnClickListener(this);
+			VarVault.stimpak.setTypeface(VarVault.font);
+		} else {
+			Log.e("onResume()", "stimpak or stimpakLL is null! Cannot set OnClickListener.");
+		}
 
 		VarVault.flashlight = (TextView) findViewById(R.id.btn_flashlight);
-		VarVault.flashlight.setTypeface(VarVault.font);
-		VarVault.flashlight.setOnClickListener(this);
+		if (VarVault.flashlight != null) {
+			VarVault.flashlight.setOnClickListener(this);
+			VarVault.flashlight.setTypeface(VarVault.font);
+		} else {
+			Log.e("onResume()", "flashlight or flashlightLL is null! Cannot set OnClickListener.");
+		}
+	}
 
-	}
 
 	protected void onDestroy() {
 		getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
@@ -966,35 +1172,20 @@
 			VarVault.mCamera.stopPreview();
 			VarVault.mCamera.release();
 			VarVault.mCamera = null;
-			VarVault.isCamOn = false;
+			VarVault.isCamOn = false;} else {
+			Log.e("onDestroy()", "don't know what happens here");
 		}
+
 		this.unregisterReceiver(VarVault.mBatInfoReceiver);
 		super.onDestroy();
 	}
 
-	public void surfaceChanged (SurfaceHolder holder,int format, int width,
-								int height){
-	}
-
-	public void surfaceCreated (SurfaceHolder holder){
-		VarVault.mHolder = holder;
-		try {
-			VarVault.mCamera.setPreviewDisplay(VarVault.mHolder);
-		} catch (IOException e) {
-			e.printStackTrace();
-		}
-	}
-
-	public void surfaceDestroyed (SurfaceHolder holder){
-		VarVault.mCamera.stopPreview();
-		VarVault.mHolder = null;
-	}
 
 	private void populateOwnedWeapons() {
-
+		Log.e("populateOwnedWeapons()", "don't know what happens here");
 		// Open Database
 		dbHelper database = new dbHelper(MainMenu.this);
-
+		Log.d("PopulateOwnedWeapons", "new database");
 		Log.d("DB", "Getting a writable database...");
 		SQLiteDatabase db = database.getWritableDatabase();
 		Log.d("DB", "...writable database gotten!");
@@ -1008,7 +1199,7 @@
 
 			String tempName = "";
 			int isWearing = 0;
-
+			Log.d("PopulateOwnedWeapons", "...looping through all weaponsssss!");
 			LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
 					LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
 			lp.setMargins(15, 0, 0, 15);
@@ -1016,7 +1207,7 @@
 			isWearing = allWeapons.getInt(1);
 
 			VarVault.Weapons.add(i, new TextView(this));
-
+			Log.d("DB", "...writable database gotten!");
 			VarVault.Weapons.get(i).setLayoutParams(lp);
 			VarVault.Weapons.get(i).setTypeface(VarVault.font);
 			VarVault.Weapons.get(i).setTextSize((float) 22.0);
@@ -1081,8 +1272,8 @@
 	}
 
 	public boolean onLongClick(View source) {
-        boolean result = false;
-        // TODO For Items, wear them.
+		boolean result = false;
+		// TODO For Items, wear them.
 		ContentValues values = new ContentValues();
 		ContentValues NOTvalues = new ContentValues();
 
@@ -1103,109 +1294,109 @@
 			Cursor currentWeapon = db.query("OwnedWeapons", new String[]{dbHelper.colName, dbHelper.colIsWearing}, "WeaponName='" + clipped + "'", null, null, null, "_id");
 
 			if (currentWeapon.moveToFirst() != false) {
-                int isWearing = currentWeapon.getInt(1);
-                Log.d("DB", "...got the info!");
-                if (isWearing == 1) {
-                    values.put(dbHelper.colIsWearing, 0);
-                    NOTvalues.put(dbHelper.colIsWearing, 0);
-                } else {
-                    values.put(dbHelper.colIsWearing, 1);
-                    NOTvalues.put(dbHelper.colIsWearing, 0);
-                }
-                Log.d("DB", "Trying to update equip...");
-                db.update("OwnedWeapons", values, dbHelper.colName + "='" + clipped + "'", null);
-                db.update("OwnedWeapons", NOTvalues, dbHelper.colName + "<>'" + clipped + "'", null);
-                Log.d("DB", "...updated equipped status!");
-                Cursor allWeapons = db.query("OwnedWeapons", new String[]{dbHelper.colName, dbHelper.colIsWearing}, null, null, null, null, "_id");
-                allWeapons.moveToFirst();
-                for (int i = 0; !allWeapons.isAfterLast(); i++) {
+				int isWearing = currentWeapon.getInt(1);
+				Log.d("DB", "...got the info!");
+				if (isWearing == 1) {
+					values.put(dbHelper.colIsWearing, 0);
+					NOTvalues.put(dbHelper.colIsWearing, 0);
+				} else {
+					values.put(dbHelper.colIsWearing, 1);
+					NOTvalues.put(dbHelper.colIsWearing, 0);
+				}
+				Log.d("DB", "Trying to update equip...");
+				db.update("OwnedWeapons", values, dbHelper.colName + "='" + clipped + "'", null);
+				db.update("OwnedWeapons", NOTvalues, dbHelper.colName + "<>'" + clipped + "'", null);
+				Log.d("DB", "...updated equipped status!");
+				Cursor allWeapons = db.query("OwnedWeapons", new String[]{dbHelper.colName, dbHelper.colIsWearing}, null, null, null, null, "_id");
+				allWeapons.moveToFirst();
+				for (int i = 0; !allWeapons.isAfterLast(); i++) {
 
-                    String temp = allWeapons.getString(0);
-                    int ruWear = allWeapons.getInt(1);
+					String temp = allWeapons.getString(0);
+					int ruWear = allWeapons.getInt(1);
 
-                    if (ruWear == 1)
-                        VarVault.Weapons.get(i).setText("\u25a0 " + temp);
-                    else
-                        VarVault.Weapons.get(i).setText("  " + temp);
+					if (ruWear == 1)
+						VarVault.Weapons.get(i).setText("\u25a0 " + temp);
+					else
+						VarVault.Weapons.get(i).setText("  " + temp);
 
-                    allWeapons.moveToNext();
-                }
-                updateWG();
-                result = true;
-            }
+					allWeapons.moveToNext();
+				}
+				updateWG();
+				result = true;
+			}
 
 
-        } else if (VarVault.Apparel.contains(source)) {
-            dbHelper database = new dbHelper(MainMenu.this);
+		} else if (VarVault.Apparel.contains(source)) {
+			dbHelper database = new dbHelper(MainMenu.this);
 
-            Log.d("DB", "Getting a writable database...");
-            SQLiteDatabase db = database.getWritableDatabase();
-            Log.d("DB", "...writable database gotten!");
+			Log.d("DB", "Getting a writable database...");
+			SQLiteDatabase db = database.getWritableDatabase();
+			Log.d("DB", "...writable database gotten!");
 
-            Log.d("DB", "Querying DB's current status...");
+			Log.d("DB", "Querying DB's current status...");
 
-            String clipped = (String) VarVault.Apparel.get(VarVault.Apparel.indexOf(source)).getText();
-            clipped = clipped.replace('\u25a0', ' ');
-            clipped = clipped.replaceAll("^\\s+", "");
+			String clipped = (String) VarVault.Apparel.get(VarVault.Apparel.indexOf(source)).getText();
+			clipped = clipped.replace('\u25a0', ' ');
+			clipped = clipped.replaceAll("^\\s+", "");
 
 
-            Cursor currentApparel = db.query("OwnedApparel", new String[]{dbHelper.colName, dbHelper.colType, dbHelper.colIsWearing}, "WeaponName='" + clipped + "'", null, null, null, "_id");
+			Cursor currentApparel = db.query("OwnedApparel", new String[]{dbHelper.colName, dbHelper.colType, dbHelper.colIsWearing}, "WeaponName='" + clipped + "'", null, null, null, "_id");
 
-            if (currentApparel.moveToFirst() != false) {
-                int type = currentApparel.getInt(1);
-                int isWearing = currentApparel.getInt(2);
-                Log.d("DB", "...got the info!");
-                if (isWearing == 1) {
-                    values.put(dbHelper.colIsWearing, 0);
-                    NOTvalues.put(dbHelper.colIsWearing, 0);
-                } else {
-                    values.put(dbHelper.colIsWearing, 1);
-                    NOTvalues.put(dbHelper.colIsWearing, 0);
-                }
-                Log.d("DB", "Trying to update wear...");// Update wear based on type
-                switch (type) {
+			if (currentApparel.moveToFirst() != false) {
+				int type = currentApparel.getInt(1);
+				int isWearing = currentApparel.getInt(2);
+				Log.d("DB", "...got the info!");
+				if (isWearing == 1) {
+					values.put(dbHelper.colIsWearing, 0);
+					NOTvalues.put(dbHelper.colIsWearing, 0);
+				} else {
+					values.put(dbHelper.colIsWearing, 1);
+					NOTvalues.put(dbHelper.colIsWearing, 0);
+				}
+				Log.d("DB", "Trying to update wear...");// Update wear based on type
+				switch (type) {
 
-                    case 1:
-                        db.update("OwnedApparel", values, dbHelper.colName + "='" + clipped + "' AND " + dbHelper.colType + "=" + 1, null);
-                        db.update("OwnedApparel", NOTvalues, dbHelper.colName + "<>'" + clipped + "' AND (" + dbHelper.colType + "=" + 1 + " OR " + dbHelper.colType + "=" + 3 + ")", null);
-                        break;
-                    case 2:
-                        db.update("OwnedApparel", values, dbHelper.colName + "='" + clipped + "' AND " + dbHelper.colType + "=" + 2, null);
-                        db.update("OwnedApparel", NOTvalues, dbHelper.colName + "<>'" + clipped + "' AND (" + dbHelper.colType + "=" + 2 + " OR " + dbHelper.colType + "=" + 3 + ")", null);
-                        break;
-                    case 3:
-                        db.update("OwnedApparel", values, dbHelper.colName + "='" + clipped + "' AND " + dbHelper.colType + "=" + 3, null);
-                        db.update("OwnedApparel", NOTvalues, dbHelper.colName + "<>'" + clipped + "' AND (" + dbHelper.colType + "=" + 1 + " OR " + dbHelper.colType + "=" + 2 + " OR " + dbHelper.colType + "=" + 3 + ")", null);
-                        break;
-                    case 4:
-                        db.update("OwnedApparel", values, dbHelper.colName + "='" + clipped + "' AND " + dbHelper.colType + "=" + 4, null);
-                        db.update("OwnedApparel", NOTvalues, dbHelper.colName + "<>'" + clipped + "' AND " + dbHelper.colType + "=" + 4, null);
-                        break;
-                }
-                Log.d("DB", "...updated wear status!");
-                Cursor allApparel = db.query("OwnedApparel", new String[]{dbHelper.colName, dbHelper.colIsWearing}, null, null, null, null, "_id");
-                allApparel.moveToFirst();
-                for (int i = 0; !allApparel.isAfterLast(); i++) {
+					case 1:
+						db.update("OwnedApparel", values, dbHelper.colName + "='" + clipped + "' AND " + dbHelper.colType + "=" + 1, null);
+						db.update("OwnedApparel", NOTvalues, dbHelper.colName + "<>'" + clipped + "' AND (" + dbHelper.colType + "=" + 1 + " OR " + dbHelper.colType + "=" + 3 + ")", null);
+						break;
+					case 2:
+						db.update("OwnedApparel", values, dbHelper.colName + "='" + clipped + "' AND " + dbHelper.colType + "=" + 2, null);
+						db.update("OwnedApparel", NOTvalues, dbHelper.colName + "<>'" + clipped + "' AND (" + dbHelper.colType + "=" + 2 + " OR " + dbHelper.colType + "=" + 3 + ")", null);
+						break;
+					case 3:
+						db.update("OwnedApparel", values, dbHelper.colName + "='" + clipped + "' AND " + dbHelper.colType + "=" + 3, null);
+						db.update("OwnedApparel", NOTvalues, dbHelper.colName + "<>'" + clipped + "' AND (" + dbHelper.colType + "=" + 1 + " OR " + dbHelper.colType + "=" + 2 + " OR " + dbHelper.colType + "=" + 3 + ")", null);
+						break;
+					case 4:
+						db.update("OwnedApparel", values, dbHelper.colName + "='" + clipped + "' AND " + dbHelper.colType + "=" + 4, null);
+						db.update("OwnedApparel", NOTvalues, dbHelper.colName + "<>'" + clipped + "' AND " + dbHelper.colType + "=" + 4, null);
+						break;
+				}
+				Log.d("DB", "...updated wear status!");
+				Cursor allApparel = db.query("OwnedApparel", new String[]{dbHelper.colName, dbHelper.colIsWearing}, null, null, null, null, "_id");
+				allApparel.moveToFirst();
+				for (int i = 0; !allApparel.isAfterLast(); i++) {
 
-                    String temp = allApparel.getString(0);
-                    int ruWear = allApparel.getInt(1);
+					String temp = allApparel.getString(0);
+					int ruWear = allApparel.getInt(1);
 
-                    if (ruWear == 1)
-                        VarVault.Apparel.get(i).setText("\u25a0 " + temp);
-                    else
-                        VarVault.Apparel.get(i).setText("  " + temp);
+					if (ruWear == 1)
+						VarVault.Apparel.get(i).setText("\u25a0 " + temp);
+					else
+						VarVault.Apparel.get(i).setText("  " + temp);
 
-                    allApparel.moveToNext();
-                }
-                updateWG();
-                result = true;
-            }
+					allApparel.moveToNext();
+				}
+				updateWG();
+				result = true;
+			}
 
 
-        }
+		}
 
-        return result;
-    }
+		return result;
+	}
 
 	private void updateWG() {
 
@@ -1255,66 +1446,113 @@
 		VarVault.caps.setText("Caps: " + VarVault.curCaps.getValue());
 	}
 
+	protected boolean isRouteDisplayed() {
+		// TODO Auto-generated method stub
+		return false;
+	}
+
 	@SuppressLint("MissingPermission")
 	@Override
-	public void onMapReady(GoogleMap mMap) {
+	public void onMapReady(GoogleMap googleMap) {
+		mMap = googleMap;
+		Log.e("onMapReady", "just initialized mMap");
+		// Configure map visuals
+		Log.e("Map Styling", "configureMapSettings()");
+		configureMapSettings();
 
-		// ===== Map visuals =====
-		mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
-//		mMap.getUiSettings().setMapToolbarEnabled(false);
-		mMap.setBuildingsEnabled(false);
-		mMap.getUiSettings().setCompassEnabled(false);
-		mMap.getUiSettings().setMapToolbarEnabled(false);
+		Log.e("Map Styling", "triggering applyMapStyle()");
+		applyMapStyle();
 
+		// Set initial camera position to current location if available
+		Log.e("location", "setInitialCameraPosition()");
 
+		// Store map for later use
+		VarVault.mMap = mMap;
 
+		// Enable location if permission granted
+		if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
+			mMap.setMyLocationEnabled(true);
+			Log.e("location", "setMyLocationEnabled(true)");
 
-		mMap.getUiSettings().setIndoorLevelPickerEnabled(false);
+		} else {
+			requestPermissionLauncher.launch(Manifest.permission.ACCESS_FINE_LOCATION);
+			Log.e("location", "requestpermissionlauncher)");
+		}
+	}
 
+	private void applyMapStyle() {
+		Log.e("Map Styling", "starting now.");
 		try {
-			MapStyleOptions style = MapStyleOptions.loadRawResourceStyle(this, R.raw.map_style);
-			boolean success = mMap.setMapStyle(style);
-			Log.d("MapStyle", "JSON Map style applied: " + success);
+			boolean success = mMap.setMapStyle(MapStyleOptions.loadRawResourceStyle(this, R.raw.map_style));
+			if (!success) {
+				Log.e("Map Styling", "Style parsing failed.");
+			} else {
+				Log.d("MapStyling", "Map style applied successfully.");
+			}
 		} catch (Resources.NotFoundException e) {
-			Log.e("MapStyle", "Style JSON not found!", e);
+			Log.e("Map Styling", "Can't find style. Error: ", e);
 		}
+	}
+
+	private void configureMapSettings() {
+		// Set map type and UI settings
+		mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
+		Log.e("Configure Map Settings", "setMapType MAP_TYPE_NORMAL");
+		mMap.getUiSettings().setMapToolbarEnabled(false);  // Disable map toolbar
+		Log.e("Configure Map Settings", "sidable toolbar");
+		mMap.setBuildingsEnabled(false);  // Disable 3D buildings
+		Log.e("Configure Map Settings", "disable 3D buildings");
+		mMap.setIndoorEnabled(true);
+		mMap.setTrafficEnabled(false);
+		// Enable gestures
+//		mMap.getUiSettings().setRotateGesturesEnabled(false);  // Disable rotation
+//		Log.e("Configure Map Settings", "disable rotation");
+		mMap.getUiSettings().setTiltGesturesEnabled(false);    // Disable tilt gestures
+		Log.e("Configure Map Settings", "disable tilt");
+
+		// Enable compass and disable zoom controls
+//		mMap.getUiSettings().setCompassEnabled(true);
+//		Log.e("Configure Map Settings", "set compass enabled");
+		mMap.getUiSettings().setZoomControlsEnabled(false);
+		Log.e("Configure Map Settings", "set zoom controls disabled");
+		mMap.getUiSettings().setMyLocationButtonEnabled(false);
+//		mMap.getUiSettings().setAllGesturesEnabled(false);
+	}
 
-		// ===== Location permissions =====
-		if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)
-				== PackageManager.PERMISSION_GRANTED) {
-			//either
+	// This method ensures the map is centered around the player's location
+	private void setInitialCameraPosition(float zoomLevel) {
+		if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
 
-			// or
-			mMap.setMyLocationEnabled(VarVault.setMyLocationEnabledBool);
-			//then
-			mMap.getUiSettings().setMyLocationButtonEnabled(VarVault.setMyLocationButtonEnabledBool);
+			FusedLocationProviderClient fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);
+			fusedLocationClient.getLastLocation().addOnSuccessListener(location -> {
+				if (location != null && mMap != null) {
+					LatLng currentLocation = new LatLng(location.getLatitude(), location.getLongitude());
+					VarVault.playerLocation = currentLocation;
 
-			// Get last known location safely
-			FusedLocationProviderClient fusedLocationClient =
-					LocationServices.getFusedLocationProviderClient(this);
+					CameraPosition position = new CameraPosition.Builder()
+							.target(currentLocation)
+							.zoom(zoomLevel)// Decide zoom level based on parameter
+							.bearing(0)
+							.tilt(0)
+							.build();
 
-			fusedLocationClient.getLastLocation()
-					.addOnSuccessListener(location -> {
-						if (location != null) {
-							LatLng playerLatLng = new LatLng(
-									location.getLatitude(),
-									location.getLongitude()
-							);
-							VarVault.playerLocation = playerLatLng;
-						}
-					});
-
+					mMap.animateCamera(CameraUpdateFactory.newCameraPosition(position), 600, null);
+
+					Log.d("Map", "Camera centered at " + currentLocation + " with zoom " + zoomLevel);
+				} else if (location == null) {
+					Log.e("Map", "Location is null");
+				} else if (mMap == null) {
+					Log.e("Map", "mMap is null");
+				}
+			});
 		} else {
-			requestPermissionLauncher.launch(Manifest.permission.ACCESS_FINE_LOCATION);
+			Log.e("Map", "Location permission not granted");
 		}
+	}
 
-		// Store map for later use
-		VarVault.mMap = mMap;
-		// Now the map is ready, you can enable location safely
-		enableLocation();
-	}
+
 
-	private void enableLocation() {
+	private void enableLocation(float zoomLevel) {
 		FusedLocationProviderClient fusedLocationClient =
 				LocationServices.getFusedLocationProviderClient(this);
 
@@ -1332,44 +1570,38 @@
 		if (mMap == null) {
 			return;
 		}
-
-		// Enable location layer
 		try {
 			mMap.setMyLocationEnabled(true);
 			mMap.getUiSettings().setMyLocationButtonEnabled(true);
 		} catch (SecurityException e) {
-			// Safety net
-			return;
-		}
-
-		// Get last known location
-		fusedLocationClient.getLastLocation()
-				.addOnSuccessListener(this, location -> {
-					if (location == null) {
-						Toast.makeText(MainMenu.this,
-								"Unable to get current location",
-								Toast.LENGTH_SHORT).show();
-						return;
-					}
-
-					LatLng currentLocation =
-							new LatLng(location.getLatitude(),
-									location.getLongitude());
+			// Get last known location
+			fusedLocationClient.getLastLocation().addOnSuccessListener(this, location -> {
+				if (location == null) {
+					Toast.makeText(
+							MainMenu.this,
+							"Unable to get current location",
+							Toast.LENGTH_SHORT
+					).show();
+					return;
+				}
+				VarVault.playerLocation = new LatLng(location.getLatitude(), location.getLongitude());
 
-					mMap.clear();
-					mMap.addMarker(new MarkerOptions()
-							.position(currentLocation)
-							.title("You are here"));
-
+				// Move the camera
+				if (mMap != null) {
 					mMap.moveCamera(
 							CameraUpdateFactory.newLatLngZoom(
-									currentLocation, 15));
-				});
+									VarVault.playerLocation,
+									zoomLevel
+							)
+					);
+				}
+			});
+
+		}
 	}
-	private static final float WORLD_MAP_ZOOM = 13.5f; // city-wide
-	private static final float LOCAL_MAP_ZOOM = 16.5f; // nearby streets
+
 	@Override
-	public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults){
+	public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
 		super.onRequestPermissionsResult(requestCode, permissions, grantResults);
 
 		if (requestCode == 1) {
@@ -1380,45 +1612,217 @@
 				Toast.makeText(this, "Permission denied", Toast.LENGTH_SHORT).show();
 			}
 		}
+		if (requestCode == 1) {
+			if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
+				// Permission granted, proceed with accessing contacts
+//				accessContacts();
+			} else {
+				// Permission denied, show a message to the user
+				Toast.makeText(this, "Permission denied to read contacts", Toast.LENGTH_SHORT).show();
+			}
+		}
 	}
+
 	private void moveCamera(LatLng target, float zoom) {
 		if (VarVault.mMap == null || target == null) return;
 
 		CameraUpdate update = CameraUpdateFactory.newLatLngZoom(target, zoom);
-		VarVault.mMap.animateCamera(update, 600, null); // smooth CRT-style move
+		VarVault.mMap.animateCamera(update, 600, null);
 	}
+
 	private void showWorldMap() {
-		GoogleMap map = VarVault.mMap;
-		LatLng player = VarVault.playerLocation;
-
-		if (map == null) return;
-		if (player == null) {
-			Log.w("Map", "Player location not ready yet");
+		if (VarVault.mMap == null || VarVault.playerLocation == null) {
+			Log.w("Map", "Player location or map is not ready.");
 			return;
 		}
+		// Check if the location permission is granted
+		if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)
+				== PackageManager.PERMISSION_GRANTED) {
+			// Permission granted, enable location
+			enableLocation(VarVault.WORLD_MAP_ZOOM);
+		} else {
+			// Permission not granted, request it
+			requestPermissionLauncher.launch(Manifest.permission.ACCESS_FINE_LOCATION);
+		}
+		// Ensure my location button is enabled
+		VarVault.mMap.setMyLocationEnabled(true);
 
-		CameraUpdate update = CameraUpdateFactory.newLatLngZoom(player, WORLD_MAP_ZOOM);
+		// Set the camera update with zoom and animate the movement
+		VarVault.mMap.animateCamera(
+				CameraUpdateFactory.newLatLngZoom(VarVault.playerLocation, zoomLevel),
+				600,
+				null
+		);
 
-		// Animate safely with duration + callback
-		map.animateCamera(update, 600, new GoogleMap.CancelableCallback() {
-			@Override
-			public void onFinish() { }
-			@Override
-			public void onCancel() { }
+		// Optional: Log position when the camera has stopped moving
+		VarVault.mMap.setOnCameraIdleListener(() -> {
+			LatLng cameraPosition = VarVault.mMap.getCameraPosition().target;
+			Log.d("Map", "Camera position is: " + cameraPosition);
 		});
+
 	}
+
 	private void showLocalMap() {
-		if (VarVault.mMap == null || VarVault.playerLocation == null) return;
+		if (VarVault.mMap == null || VarVault.playerLocation == null) {
+			Log.w("Map", "Player location or map is not ready.");
+			return;
+		}
+		// Check if the location permission is granted
+		if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)
+				== PackageManager.PERMISSION_GRANTED) {
+			// Permission granted, enable location
+			enableLocation(VarVault.LOCAL_MAP_ZOOM);
+		} else {
+			// Permission not granted, request it
+			requestPermissionLauncher.launch(Manifest.permission.ACCESS_FINE_LOCATION);
+		}
+		// Ensure my location button is enabled
+		VarVault.mMap.setMyLocationEnabled(true);
 
+		// Set the camera update with zoom and animate the movement
 		VarVault.mMap.animateCamera(
-				CameraUpdateFactory.newLatLngZoom(
-						VarVault.playerLocation,
-						LOCAL_MAP_ZOOM
-				),
+				CameraUpdateFactory.newLatLngZoom(VarVault.playerLocation, zoomLevel),
 				600,
 				null
 		);
+
+		// Optional: Log position when the camera has stopped moving
+		VarVault.mMap.setOnCameraIdleListener(() -> {
+			LatLng cameraPosition = VarVault.mMap.getCameraPosition().target;
+			Log.d("Map", "Camera position is: " + cameraPosition);
+		});
 	}
+
+	private final SensorEventListener sensorEventListener = new SensorEventListener() {
+		@Override
+		public void onSensorChanged(SensorEvent event) {
+			if (mMap == null) return;
+
+			SensorManager.getRotationMatrixFromVector(rotationMatrix, event.values);
+			SensorManager.getOrientation(rotationMatrix, orientation);
+			float azimuthInRadians = orientation[0];
+			float azimuthInDegrees = (float) Math.toDegrees(azimuthInRadians);
+			azimuthInDegrees = (azimuthInDegrees + 360) % 360;
+
+			// Update camera bearing to match compass
+			CameraPosition currentPos = mMap.getCameraPosition();
+			CameraPosition camPos = new CameraPosition.Builder(currentPos)
+					.bearing(azimuthInDegrees)
+					.tilt(0)  // keep top-down
+					.build();
+//			mMap.moveCamera(CameraUpdateFactory.newCameraPosition(camPos));
+		}
+
+		@Override
+		public void onAccuracyChanged(Sensor sensor, int accuracy) {
+		}
+	};
+
+	public void onSensorChanged(SensorEvent event) {
+		if (!isCompassModeEnabled) return;
+		if (mMap == null || VarVault.playerLocation == null) return;
+
+		SensorManager.getRotationMatrixFromVector(rotationMatrix, event.values);
+		SensorManager.getOrientation(rotationMatrix, orientation);
+
+		float azimuth = (float) Math.toDegrees(orientation[0]);
+		azimuth = (azimuth + 360) % 360;
+
+		CameraPosition camPos = new CameraPosition.Builder()
+				.target(VarVault.playerLocation)
+				.zoom(mMap.getCameraPosition().zoom)
+				.bearing(azimuth)
+				.tilt(0)
+				.build();
+
+		mMap.moveCamera(CameraUpdateFactory.newCameraPosition(camPos));
+	}
+
+	private void updateCompassIcon() {
+		compassToggle.setAlpha(isCompassModeEnabled ? 1.0f : 0.4f);
+	}
+
+	//unused but appaerently useful?
+	private void loadMapFragmentOnMapReady() {
+
+		SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
+				.findFragmentByTag("MAP_FRAGMENT_TAG");
+
+		if (mapFragment == null) {
+			mapFragment = SupportMapFragment.newInstance();
+			getSupportFragmentManager().beginTransaction()
+					.replace(R.id.map_fragment_container, mapFragment, "MAP_FRAGMENT_TAG")
+					.commit();
+			Log.e("MapFragment", "Map fragment created and added.");
+		} else {
+			Log.e("MapFragment", "Map fragment already exists, replacing.");
+			getSupportFragmentManager().beginTransaction()
+					.replace(R.id.map_fragment_container, mapFragment, "MAP_FRAGMENT_TAG")
+					.commit();
+		}
+
+
+		mapFragment.getMapAsync(this);
+
+		ViewGroup mapFragmentContainer = findViewById(R.id.map_fragment_container);
+		if (mapFragmentContainer == null) {
+			Log.e("MapFragment", "mapFragmentContainer is not found.");
+			return;
+		}
+		// Ensure bottom bar is on top and clickable
+		ViewGroup bottomBar = findViewById(R.id.bottom_panel);
+		if (bottomBar != null) bottomBar.bringToFront();
+	}
+
+
+	private void initializeMenuButtons() {
+		// Initialize the "Stats" button
+		VarVault.stats = findViewById(R.id.left_stats);
+		TextView statsText = findViewById(R.id.left_button_stats);
+		statsText.setTypeface(VarVault.font);
+		statsText.setTextColor(Color.argb(100, 255, 225, 0));
+		VarVault.stats.setOnClickListener(this);
+
+		// Initialize the "Items" button
+		VarVault.items = findViewById(R.id.left_items);
+		TextView itemsText = findViewById(R.id.left_button_items);
+		itemsText.setTypeface(VarVault.font);
+		itemsText.setTextColor(Color.argb(100, 255, 225, 0));
+		VarVault.items.setOnClickListener(this);
+
+		// Initialize the "Data" button
+		VarVault.data = findViewById(R.id.left_data);
+		TextView dataText = findViewById(R.id.left_button_data);
+		dataText.setTypeface(VarVault.font);
+		dataText.setTextColor(Color.argb(100, 255, 225, 0));
+		VarVault.data.setOnClickListener(this);
+		// For STATS button
+		TextView statsButton = findViewById(R.id.left_button_stats);
+		if (statsButton != null) {
+			statsButton.setTypeface(VarVault.font);  // Reapply the font
+			statsButton.setTextColor(Color.argb(100, 255, 225, 0));  // Ensure the text color is correct
+		}
+
+		// For ITEMS button
+		TextView itemsButton = findViewById(R.id.left_button_items);
+		if (itemsButton != null) {
+			itemsButton.setTypeface(VarVault.font);  // Reapply the font
+			itemsButton.setTextColor(Color.argb(100, 255, 225, 0));  // Ensure the text color is correct
+		}
+
+		// For DATA button
+		TextView dataButton = findViewById(R.id.left_button_data);
+		if (dataButton != null) {
+			dataButton.setTypeface(VarVault.font);  // Reapply the font
+			dataButton.setTextColor(Color.argb(100, 255, 225, 0));  // Ensure the text color is correct
+		}
+
+		// Step 4: Check permissions and enable location if necessary
+		if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
+			enableLocation(zoomLevel);  // Enable location if permission is granted
+		}
+	}
+
 	private void recenterMap(float zoom) {
 		if (mMap == null || VarVault.playerLocation == null) return;
 
@@ -1453,18 +1857,18 @@
 		);
 	}
 
+	ImageButton compassToggle;
 
+	public void initCompassToggle(View view) {
 
-	public void initCompassToggle() {
 		compassToggle = findViewById(R.id.btnCompassToggle);
-
 		Log.e("Compass", "btn parent=" + compassToggle.getParent());
 		Log.e("Compass", "Compass attached = " + compassToggle.isAttachedToWindow());
 		// Safety checks
 		compassToggle.setClickable(true);
 		compassToggle.setFocusable(true);
 		compassToggle.bringToFront();
-		compassToggle.setElevation(100f);
+
 //		compassToggle.invalidate();
 
 		// TAP
@@ -1482,42 +1886,36 @@
 		// LONG PRESS
 		compassToggle.setOnLongClickListener(v -> {
 			if (mMap != null) {
-				UiSettings ui = mMap.getUiSettings();
-				ui.setRotateGesturesEnabled(true);
-				ui.setCompassEnabled(false);
-
+				mMap.getUiSettings().setRotateGesturesEnabled(true);
 				if (VarVault.playerLocation != null) {
 					mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(
 							VarVault.playerLocation, zoomLevel
 					));
+					Log.d("Compass", "Rotation ENABLED and map centered (long press)");
+				} else {
+					Log.d("Compass", "Player location not ready yet");
 				}
 			}
 			v.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);
 			return true;
 		});
 
-
 		// TOUCH (release only)
 		compassToggle.setOnTouchListener((v, event) -> {
-			if (event.getAction() == MotionEvent.ACTION_UP ||
-					event.getAction() == MotionEvent.ACTION_CANCEL) {
-
-				if (mMap != null) {
-					UiSettings ui = mMap.getUiSettings();
-					ui.setRotateGesturesEnabled(false);
-					ui.setCompassEnabled(false);
-				}
-
-				if (!isCompassModeEnabled) {
-					lockMapNorth();
-				}
+			switch (event.getAction()) {
+				case MotionEvent.ACTION_UP:
+				case MotionEvent.ACTION_CANCEL:
+					Log.d("Compass", "RELEASE");
+					if (mMap != null) {
+						mMap.getUiSettings().setRotateGesturesEnabled(false);
+					}
+					if (!isCompassModeEnabled) {
+						lockMapNorth();
+					}
+					break;
 			}
-			return false;
+			return false; // VERY IMPORTANT
 		});
-
 	}
-	private void updateCompassIcon() {
-		compassToggle.setAlpha(isCompassModeEnabled ? 1.0f : 0.4f);
-	}
-}
 
+}
\ No newline at end of file
Index: app/src/main/java/com/skettidev/pipdroid/VarVault.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/skettidev/pipdroid/VarVault.java b/app/src/main/java/com/skettidev/pipdroid/VarVault.java
--- a/app/src/main/java/com/skettidev/pipdroid/VarVault.java
+++ b/app/src/main/java/com/skettidev/pipdroid/VarVault.java	(date 1766582124876)
@@ -20,15 +20,9 @@
 // init maps
 	public static GoogleMap mMap;
 	public static LatLng playerLocation;
-
-	// set local & world map zoom values
+	// SPECIAL stats
 	public static final float WORLD_MAP_ZOOM = 13.5f; // city-wide
 	public static final float LOCAL_MAP_ZOOM = 16.5f; // nearby streets
-
-	public static final boolean setMyLocationButtonEnabledBool = false;
-	public static final boolean setMyLocationEnabledBool = true;
-	// SPECIAL stats
-
 	protected static Stat strength = new Stat(), perception = new Stat(), endurance = new Stat(), charisma = new Stat(), intelligence = new Stat(), agility = new Stat(), luck = new Stat();
 	protected static ArrayList<Stat> SPECIAL_STAT_VALUES = new ArrayList<Stat>();
 	
@@ -38,6 +32,8 @@
 	
 	// Three main buttons
 	protected static ImageView stats, items, data;
+
+
 	protected static ArrayList<ImageView> MAIN_BUTTONS = new ArrayList<ImageView>();
 
 	// Top bar content
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
--- a/app/src/main/AndroidManifest.xml
+++ b/app/src/main/AndroidManifest.xml	(date 1766582124874)
@@ -35,55 +35,56 @@
     <uses-feature android:name="android.hardware.camera.flash"
                   tools:ignore="UnnecessaryRequiredFeature"/>
 
-    <application
-            android:icon="@mipmap/ic_launcher"
-            android:label="@string/app_name"
-            android:allowBackup="true"
-            android:dataExtractionRules="@xml/data_extraction_rules"
-            android:fullBackupContent="@xml/backup_rules"
-            android:roundIcon="@mipmap/ic_launcher_round"
-            android:supportsRtl="true"
-            android:theme="@android:style/Theme.Wallpaper.NoTitleBar.Fullscreen">
-
-        <activity
+    <application>
+        <meta-data
+                android:name="com.google.android.geo.API_KEY"
+                android:value="@string/google_maps_key"/>
+            <activity
+                android:icon="@mipmap/ic_launcher"
+                android:roundIcon="@mipmap/ic_launcher_round"
+                android:label="@string/app_name"
+                android:allowBackup="true"
+                android:dataExtractionRules="@xml/data_extraction_rules"
+                android:fullBackupContent="@xml/backup_rules"
+                android:supportsRtl="true"
                 android:name=".Splash"
-                android:screenOrientation="landscape"
-                android:theme="@style/Theme.PipDroid3000mkII"
-                android:exported="true">
-            <intent-filter>
-                <action android:name="android.intent.action.MAIN"/>
-                <category android:name="android.intent.category.LAUNCHER"/>
-            </intent-filter>
-        </activity>
+                android:exported="true"
+                android:theme="@style/AppTheme.Fullscreen">
+                <intent-filter>
+                    <action android:name="android.intent.action.MAIN"/>
+                    <category android:name="android.intent.category.LAUNCHER"/>
+                </intent-filter>
+            </activity>
 
         <activity
                 android:name=".MainMenu"
                 android:screenOrientation="landscape"
-                android:theme="@style/FullscreenTheme"
+                android:configChanges="keyboardHidden|orientation|screenSize"
+                android:theme="@style/AppTheme.Fullscreen"
                 android:label="@string/app_name"
                 android:exported="true"/>
+
         <activity
                 android:name=".SetSpecial"
                 android:screenOrientation="landscape"
-                android:theme="@style/FullscreenTheme"
+                android:configChanges="keyboardHidden|orientation|screenSize"
+                android:theme="@style/AppTheme.Fullscreen"
                 android:label="@string/app_name"
                 android:exported="true"/>
+
         <activity
                 android:name=".SetSkills"
                 android:screenOrientation="landscape"
-                android:theme="@style/FullscreenTheme"
+                android:configChanges="keyboardHidden|orientation|screenSize"
+                android:theme="@style/AppTheme.Fullscreen"
                 android:label="@string/app_name"
                 android:exported="true"/>
-
-        <meta-data
-                android:name="com.google.android.maps.v2.API_KEY"
-                android:value="@string/google_maps_key"/>
-
-<!--        <uses-library android:name="com.google.android.gms.location"/>-->
-<!--        <uses-library android:name="com.google.android.gms.maps"/>-->
-<!--        <uses-library android:name="androidx.appcompat.app"/>-->
-<!--        <uses-library android:name="androidx.activity.contextaware"/>-->
-
     </application>
-
 </manifest>
+
+
+
+
+
+
+
